// =============================================================================
// SIDEBAR MODULE
// 侧边栏布局和响应式增强
// =============================================================================

// 右侧栏自适应窗口高度
.right-sidebar {
    &.sticky {
        max-height: 100vh;
        overflow-y: auto;

        @include respond(lg) {
            max-height: calc(100vh - var(--main-top-padding) * 2);
        }
    }

    gap: 20px;

    @include respond(lg) {
        gap: 25px;
    }

    .widget {
        flex-shrink: 0;

        &:not(:last-child) {
            margin-bottom: 0;
        }
    }
}

// =============================================================================
// TAG CLOUD MODULE
// 标签云和分类云增强样式 - 频率颜色和布局
// =============================================================================

// 标签云容器增强
.widget.tagCloud {
    .tagCloud-tags.scrollable-tags {
        padding: 15px;
        background: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
    }

    // 标签项基础样式
    .tag-item {
        align-items: center;
        gap: 5px;
        margin: 4px 6px 4px 0;
        padding: 6px 12px;
        border-radius: var(--tag-border-radius);
        font-size: 1.3rem;
        font-weight: 500;
        transition: all 0.3s ease;
        text-decoration: none;
        position: relative;

        // 标签数量显示
        .tag-count {
            font-size: 1.1rem;
            opacity: 0.8;
            font-weight: 400;
            background: rgba(255, 255, 255, 0.2);
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: 4px;
        }

        // 悬停效果
        &:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-l2);

            .tag-count {
                opacity: 1;
                background: rgba(255, 255, 255, 0.3);
            }
        }
    }
}

// 频率颜色主题 - 纯色版本
.widget.tagCloud .tag-item {

    // 频率等级 1 (最低频率) - 淡蓝色
    &.tag-frequency-1 {
        background: #e3f2fd;
        color: #1565c0;
        border: 1px solid #90caf9;

        &:hover {
            background: #bbdefb;
            color: #0d47a1;
        }
    }

    // 频率等级 2 - 淡绿色
    &.tag-frequency-2 {
        background: #e8f5e8;
        color: #2e7d32;
        border: 1px solid #a5d6a7;

        &:hover {
            background: #c8e6c9;
            color: #1b5e20;
        }
    }

    // 频率等级 3 - 淡黄色
    &.tag-frequency-3 {
        background: #fffde7;
        color: #f57f17;
        border: 1px solid #fff176;

        &:hover {
            background: #fff9c4;
            color: #e65100;
        }
    }

    // 频率等级 4 - 淡橙色
    &.tag-frequency-4 {
        background: #fff3e0;
        color: #ef6c00;
        border: 1px solid #ffb74d;

        &:hover {
            background: #ffcc80;
            color: #bf360c;
        }
    }

    // 频率等级 5 (最高频率) - 红色
    &.tag-frequency-5 {
        background: #ffebee;
        color: #c62828;
        border: 1px solid #ef9a9a;

        &:hover {
            background: #ffcdd2;
            color: #b71c1c;
        }
    }
}

// 暗色主题适配
:root[data-scheme="dark"] {
    .widget.tagCloud .tag-item {

        // 暗色主题下的频率颜色调整
        &.tag-frequency-1 {
            background: #1a237e;
            color: #c5cae9;
            border: 1px solid #3f51b5;

            &:hover {
                background: #303f9f;
            }
        }

        &.tag-frequency-2 {
            background: #1b5e20;
            color: #c8e6c9;
            border: 1px solid #4caf50;

            &:hover {
                background: #388e3c;
            }
        }

        &.tag-frequency-3 {
            background: #e65100;
            color: #fff3e0;
            border: 1px solid #ffb74d;

            &:hover {
                background: #ff9800;
            }
        }

        &.tag-frequency-4 {
            background: #bf360c;
            color: #ffccbc;
            border: 1px solid #ff8a65;

            &:hover {
                background: #ff5722;
            }
        }

        &.tag-frequency-5 {
            background: #b71c1c;
            color: #ffcdd2;
            border: 1px solid #ef5350;

            &:hover {
                background: #f44336;
            }
        }
    }
}

// 响应式调整
@media (max-width: 768px) {
    .widget.tagCloud {
        .tagCloud-tags.scrollable-tags {
            max-height: 250px;
            padding: 12px;
        }

        .tag-item {
            font-size: 1.2rem;
            padding: 5px 10px;
            margin: 3px 4px 3px 0;

            .tag-count {
                font-size: 1.0rem;
                padding: 1px 4px;
            }
        }
    }
}

@media (max-width: 480px) {
    .widget.tagCloud {
        .tagCloud-tags.scrollable-tags {
            max-height: 200px;
            padding: 10px;
        }

        .tag-item {
            font-size: 1.1rem;
            padding: 4px 8px;

            .tag-count {
                font-size: 0.9rem;
            }
        }
    }
}

// =============================================================================
// CATEGORIES FREQUENCY COLORS
// 分类频率颜色主题 - 使用不同的色彩系列区分标签和分类
// =============================================================================

// 分类频率颜色主题 - 紫色系列
.widget.tagCloud.categories .tag-item {

    // 频率等级 1 (最低频率) - 淡紫色
    &.category-frequency-1 {
        background: #f3e5f5;
        color: #7b1fa2;
        border: 1px solid #ce93d8;

        &:hover {
            background: #e1bee7;
            color: #4a148c;
        }
    }

    // 频率等级 2 - 青色
    &.category-frequency-2 {
        background: #e0f2f1;
        color: #00695c;
        border: 1px solid #80cbc4;

        &:hover {
            background: #b2dfdb;
            color: #004d40;
        }
    }

    // 频率等级 3 - 粉色
    &.category-frequency-3 {
        background: #fce4ec;
        color: #c2185b;
        border: 1px solid #f8bbd9;

        &:hover {
            background: #f8bbd9;
            color: #880e4f;
        }
    }

    // 频率等级 4 - 深蓝色
    &.category-frequency-4 {
        background: #e8eaf6;
        color: #3f51b5;
        border: 1px solid #c5cae9;

        &:hover {
            background: #c5cae9;
            color: #1a237e;
        }
    }

    // 频率等级 5 (最高频率) - 深紫色
    &.category-frequency-5 {
        background: #ede7f6;
        color: #673ab7;
        border: 1px solid #d1c4e9;

        &:hover {
            background: #d1c4e9;
            color: #311b92;
        }
    }
}

// 暗色主题下的分类颜色适配
:root[data-scheme="dark"] {
    .widget.tagCloud.categories .tag-item {

        // 暗色主题下的分类频率颜色调整
        &.category-frequency-1 {
            background: #4a148c;
            color: #e1bee7;
            border: 1px solid #8e24aa;

            &:hover {
                background: #7b1fa2;
            }
        }

        &.category-frequency-2 {
            background: #004d40;
            color: #b2dfdb;
            border: 1px solid #00796b;

            &:hover {
                background: #00695c;
            }
        }

        &.category-frequency-3 {
            background: #880e4f;
            color: #f8bbd9;
            border: 1px solid #ad1457;

            &:hover {
                background: #c2185b;
            }
        }

        &.category-frequency-4 {
            background: #1a237e;
            color: #c5cae9;
            border: 1px solid #303f9f;

            &:hover {
                background: #3f51b5;
            }
        }

        &.category-frequency-5 {
            background: #311b92;
            color: #d1c4e9;
            border: 1px solid #512da8;

            &:hover {
                background: #673ab7;
            }
        }
    }
}